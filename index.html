<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?key=AIzaSyBGspqze0xjt2OOwMPoq63bNbATU7nkbT0&sensor=false">
    </script>
    <script type="text/javascript">
        var geocoder;
        var map;
        var lastAddress;
        var directionsService = new google.maps.DirectionsService();
        var directionsDisplay;
        var markersArray = [];
        
        function initialize() 
        {
            directionsDisplay = new google.maps.DirectionsRenderer();
            geocoder = new google.maps.Geocoder();
            
            var mapOptions = {
              center: new google.maps.LatLng(13.0396202, 80.199629),
              zoom: 12,
              mapTypeId: google.maps.MapTypeId.ROADMAP,
              panControl: false,
              zoomControl: false,
              mapTypeControl: false,
              scaleControl: false,
              streetViewControl: false,
              overviewMapControl: false
            };
            
            map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
            directionsDisplay.setMap(map);
        }
        
        function GetDirection(add1, add2)
        {           
            if(add1.toLowerCase() == "my location" || add2.toLowerCase() == "my location")
            {
                if(navigator.geolocation) 
                {
                    navigator.geolocation.getCurrentPosition(
                        function success_handler(position)
                        {
                            latitude = position.coords.latitude;
                            longitude = position.coords.longitude;
                            
                            if(add1.toLowerCase() == "my location") 
                                add1 = new google.maps.LatLng(latitude, longitude);
                            
                            if(add2.toLowerCase() == "my location")
                                add2 = new google.maps.LatLng(latitude, longitude);   
                            
                            LocateAddress();
                        }, 
                        function error_handler()
                        {
                            alert("error in detecting your location");
                        });
                }
            }
            else
            {
                LocateAddress();
            }
            
            function LocateAddress()
            {
                var request = {
                                origin: add1,
                                destination: add2,
                                travelMode: google.maps.TravelMode.DRIVING
                              };
                
                directionsService.route(request, function(result, status) 
                {
                   if (status == google.maps.DirectionsStatus.OK) 
                   {                                           
                       directionsDisplay.setDirections(result);
                   }
                   else
                   {
                       alert("Problem in detecting route for your input.");
                   }
                });
            }
        }        
        
        //https://developers.google.com/maps/documentation/javascript/geocoding
        function LocateAddress(address) 
        {
            lastAddress = address;
            ClearMarkers();
                        
            geocoder.geocode({'address': address}, function(results, status) 
                             {
                              if (status == google.maps.GeocoderStatus.OK) 
                              {
                                map.setCenter(results[0].geometry.location);
                                  
                                var marker = new google.maps.Marker({
                                    map: map,
                                    position: results[0].geometry.location
                                });
                                  
                                markersArray.push(marker);
                              } 
                              else 
                              {
                                //alert("Problem in locating address for the following reason: " + status);
                              }
                             });
        }
        
        function ClearMarkers() 
        {
            for (var i = 0; i < markersArray.length; i++ ) 
            {
                markersArray[i].setMap(null);
            }
            
            markersArray = new Array();
        }
        
        function ShowControls()
        {
            map.setOptions({zoomControl: true, mapTypeControl: true, zoomControlOptions: {position: google.maps.ControlPosition.RIGHT_TOP}});
        }
        
        function HideControls()
        {
            map.setOptions({zoomControl: false, mapTypeControl: false});
        }
    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
</html>